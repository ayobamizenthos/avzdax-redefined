<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AVZDAX | PRIMUS TACTICAL DISPLAY</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- LIBRARIES -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- POST PROCESSING -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/EffectComposer.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/RenderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/ShaderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/UnrealBloomPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/CopyShader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/LuminosityHighPassShader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/RGBShiftShader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/FilmShader.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;600&family=Orbitron:wght@500;900&family=Share+Tech+Mono&display=swap');

        body { margin: 0; background-color: #000; color: #fff; font-family: 'Inter', sans-serif; overflow-x: hidden; }

        /* --- LAYOUT --- */
        .split-layout { display: flex; position: relative; }

        /* LEFT: THE TACTICAL FEED */
        .visualizer-col {
            width: 60%; height: 100vh; position: sticky; top: 0;
            background: #000; border-right: 1px solid #222; z-index: 20; overflow: hidden;
        }
        #canvas-container { width: 100%; height: 100%; }

        /* RIGHT: THE INTEL STREAM */
        .content-col { width: 40%; background: #030303; position: relative; z-index: 10; }

        /* --- HUD OVERLAY --- */
        .hud-layer {
            position: absolute; inset: 0; pointer-events: none; padding: 30px;
            display: flex; flex-direction: column; justify-content: space-between;
            font-family: 'Share Tech Mono', monospace;
        }

        .hud-header { display: flex; justify-content: space-between; align-items: flex-start; }
        .cam-tag { color: #00ffaa; border: 1px solid #00ffaa; padding: 2px 8px; font-size: 10px; background: rgba(0,255,170,0.1); }
        .rec-blink { width: 8px; height: 8px; background: red; border-radius: 50%; display: inline-block; animation: blink 1s infinite; margin-right: 5px; }
        
        .reticle-container {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 350px; height: 350px; transition: all 0.3s ease-out;
        }
        .reticle-bracket {
            position: absolute; width: 30px; height: 30px; border: 2px solid rgba(255,255,255,0.3); transition: all 0.3s;
        }
        .tl { top: 0; left: 0; border-right: 0; border-bottom: 0; }
        .tr { top: 0; right: 0; border-left: 0; border-bottom: 0; }
        .bl { bottom: 0; left: 0; border-right: 0; border-top: 0; }
        .br { bottom: 0; right: 0; border-left: 0; border-top: 0; }

        /* AR Labels */
        .ar-tag {
            position: absolute; transform: translate(-50%, -50%); display: flex; align-items: center; gap: 10px;
            opacity: 0; transition: opacity 0.3s; z-index: 30;
        }
        .ar-dot { width: 4px; height: 4px; background: white; border-radius: 50%; box-shadow: 0 0 10px white; }
        .ar-line { width: 40px; height: 1px; background: white; transform-origin: left; }
        .ar-text {
            background: rgba(0, 10, 0, 0.8); border: 1px solid white; color: white;
            font-size: 9px; padding: 4px 8px; backdrop-filter: blur(4px); white-space: nowrap;
        }

        /* DANGER / SUCCESS STATES */
        .danger-mode .reticle-bracket { border-color: #ff3333; box-shadow: 0 0 20px #ff3333; }
        .danger-mode .ar-dot { background: #ff3333; }
        .danger-mode .ar-line { background: #ff3333; }
        .danger-mode .ar-text { border-color: #ff3333; color: #ff3333; background: rgba(20,0,0,0.9); }

        .success-mode .reticle-bracket { border-color: #00ffaa; box-shadow: 0 0 20px #00ffaa; width: 200px; height: 200px; top: 50%; left: 50%; }
        
        /* GLITCH TEXT ANIMATION */
        .glitch-text { position: relative; }
        .glitch-text::before, .glitch-text::after {
            content: attr(data-text); position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0.8;
        }
        .glitch-text::before { color: #00ffaa; z-index: -1; animation: glitch-1 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) both infinite; }
        .glitch-text::after { color: #ff00ff; z-index: -2; animation: glitch-2 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) both infinite; }

        @keyframes glitch-1 { 0% { transform: translate(0); } 20% { transform: translate(-2px, 2px); } 40% { transform: translate(-2px, -2px); } 60% { transform: translate(2px, 2px); } 80% { transform: translate(2px, -2px); } 100% { transform: translate(0); } }
        @keyframes glitch-2 { 0% { transform: translate(0); } 20% { transform: translate(2px, -2px); } 40% { transform: translate(2px, 2px); } 60% { transform: translate(-2px, -2px); } 80% { transform: translate(-2px, 2px); } 100% { transform: translate(0); } }

        /* --- CONTENT --- */
        .brand-header { font-family: 'Orbitron'; font-weight: 900; font-size: 3.5rem; color: white; line-height: 0.9; margin-bottom: 20px; text-shadow: 0 0 30px rgba(255,255,255,0.1); }
        .scroll-step { min-height: 80vh; display: flex; flex-direction: column; justify-content: center; padding: 60px; border-bottom: 1px solid #111; opacity: 0.3; transition: opacity 0.5s; }
        .scroll-step.active { opacity: 1; }
        .step-meta { font-family: 'Share Tech Mono'; color: #00ffaa; font-size: 11px; letter-spacing: 2px; margin-bottom: 10px; }
        .step-title { font-family: 'Orbitron'; font-weight: 700; font-size: 2.5rem; color: white; margin-bottom: 15px; }
        .step-desc { font-size: 1rem; color: #999; line-height: 1.6; border-left: 2px solid #333; padding-left: 20px; }
        
        .back-btn { position: fixed; top: 30px; right: 30px; z-index: 999; font-family: 'Share Tech Mono'; color: white; border: 1px solid #333; padding: 8px 16px; background: black; transition: all 0.3s; }
        .back-btn:hover { border-color: #00ffaa; color: #00ffaa; }
        @keyframes blink { 50% { opacity: 0; } }
    </style>
</head>
<body>
    <a href="products.html" class="back-btn">CLOSE FEED [X]</a>

    <div class="split-layout">
        
        <!-- VISUALIZER -->
        <div class="visualizer-col">
            <div id="canvas-container"></div>
            <div class="hud-layer" id="hud-main">
                <div class="hud-header">
                    <div><div class="cam-tag">CAM_09 // LIVE FEED</div></div>
                    <div class="text-right"><div class="text-red-500 text-xs font-bold"><span class="rec-blink"></span> RECORDING</div></div>
                </div>

                <div class="reticle-container" id="reticle">
                    <div class="reticle-bracket tl"></div><div class="reticle-bracket tr"></div>
                    <div class="reticle-bracket bl"></div><div class="reticle-bracket br"></div>
                </div>

                <!-- AR TAGS -->
                <div class="ar-tag" id="tag-head"><div class="ar-dot"></div><div class="ar-line"></div><div class="ar-text">FACE_ID: MATCHING...</div></div>
                <div class="ar-tag" id="tag-spine"><div class="ar-dot"></div><div class="ar-line"></div><div class="ar-text">GAIT: SUSPICIOUS</div></div>
                <div class="ar-tag" id="tag-weapon"><div class="ar-dot"></div><div class="ar-line"></div><div class="ar-text">OBJ: UNKNOWN</div></div>

                <div class="border-t border-gray-800 pt-4 mt-auto flex justify-between items-end">
                    <div>
                        <div class="text-xs text-gray-500">THREAT PROBABILITY</div>
                        <div class="text-4xl font-bold font-orbitron text-white" id="prob-val">0%</div>
                    </div>
                    <div class="text-xs font-mono text-[#00ffaa]" id="status-text">SYSTEM: MONITORING</div>
                </div>
            </div>
        </div>

        <!-- NARRATIVE -->
        <div class="content-col">
            <div class="p-16 pt-32 pb-16 border-b border-[#111]">
                <div class="text-gray-500 font-mono text-xs tracking-widest mb-4">INTELLIGENCE SUITE</div>
                <h1 class="brand-header">PRIMUS<br>V4.0</h1>
                <p class="text-lg text-gray-400 leading-relaxed">Standard cameras only see light. PRIMUS sees data. Our AI core converts video into a real-time volumetric simulation to predict threats.</p>
            </div>

            <div class="scroll-step" id="step-0">
                <div class="step-meta">01 // ACQUISITION</div>
                <h2 class="step-title">THERMAL<br>LIDAR SCAN</h2>
                <p class="step-desc">The system generates a 3D point-cloud of the environment. It strips away visual noise to reveal the raw geometry of the scene.</p>
            </div>

            <div class="scroll-step" id="step-1">
                <div class="step-meta">02 // CLASSIFICATION</div>
                <h2 class="step-title">BIOMETRIC<br>LOCK</h2>
                <p class="step-desc"><strong>HUMAN DETECTED.</strong> The neural engine verifies biological movement patterns. Facial vectors are hashed and compared against the watchlist instantly.</p>
            </div>

            <div class="scroll-step" id="step-2">
                <div class="step-meta">03 // BEHAVIOR</div>
                <h2 class="step-title">SKELETAL<br>TRACKING</h2>
                <p class="step-desc">Primus maps 18 skeletal joints in real-time. It detects "Crouching," "Stalking," or "Aggressive Posture" before a weapon is even drawn.</p>
            </div>

            <div class="scroll-step" id="step-3">
                <div class="step-meta" style="color:#ff3333">04 // THREAT</div>
                <h2 class="step-title text-red-500">WEAPON<br>IDENTIFIED</h2>
                <p class="step-desc" style="border-color: #ff3333;"><strong>CRITICAL ALERT.</strong> Computer Vision identifies a firearm profile. The UI shifts to Combat Mode. Priority interrupt signal sent to NEST HQ.</p>
            </div>

            <div class="scroll-step" id="step-4">
                <div class="step-meta" style="color:#00ffaa">05 // RESPONSE</div>
                <!-- GLITCH TEXT HERE -->
                <h2 class="step-title text-[#00ffaa] glitch-text" data-text="TARGET NEUTRALIZED">TARGET<br></h2>
                <p class="step-desc" style="border-color: #06a536;"><strong>CONTAINMENT ACTIVE.</strong> Subject immobilized. High-voltage containment field deployed. Situation handed over to law enforcement.</p>
            </div>
            <div class="h-32"></div>
        </div>
    </div>

    <script>
        gsap.registerPlugin(ScrollTrigger);

        // SETUP
        const container = document.getElementById('canvas-container');
        const scene = new THREE.Scene();
        scene.background = new THREE.Color('#000000');
        scene.fog = new THREE.FogExp2('#000000', 0.02);
        const camera = new THREE.PerspectiveCamera(45, container.offsetWidth/container.offsetHeight, 0.1, 1000);
        camera.position.set(0, 2, 8);
        const renderer = new THREE.WebGLRenderer({ antialias: false });
        renderer.setSize(container.offsetWidth, container.offsetHeight);
        container.appendChild(renderer.domElement);

        // FX
        const composer = new THREE.EffectComposer(renderer);
        composer.addPass(new THREE.RenderPass(scene, camera));
        const bloom = new THREE.UnrealBloomPass(new THREE.Vector2(window.innerWidth, window.innerHeight), 1.5, 0.4, 0.85);
        bloom.threshold = 0; bloom.strength = 1.5; bloom.radius = 0.5;
        composer.addPass(bloom);
        const rgb = new THREE.ShaderPass(THREE.RGBShiftShader); rgb.uniforms['amount'].value = 0.0015; composer.addPass(rgb);
        const film = new THREE.ShaderPass(THREE.FilmShader); film.uniforms['nIntensity'].value = 0.5; film.uniforms['sIntensity'].value = 0.1; composer.addPass(film);

        // ASSETS - "THE INTRUDER" (Built with Primitives to look like a Tech Simulation)
        const botGroup = new THREE.Group(); scene.add(botGroup);
        const matHolo = new THREE.MeshBasicMaterial({ color: 0x00ffaa, wireframe: true, transparent: true, opacity: 0.15 });
        const matAlert = new THREE.MeshBasicMaterial({ color: 0xff3333, wireframe: true });
        const matSecure = new THREE.MeshBasicMaterial({ color: 0x00ffaa, wireframe: true, opacity: 0.8 });

        // Procedural Humanoid
        const head = new THREE.Mesh(new THREE.IcosahedronGeometry(0.25, 1), matHolo); head.position.y = 1.7;
        const torso = new THREE.Mesh(new THREE.CylinderGeometry(0.1, 0.3, 0.6, 8), matHolo); torso.position.y = 1.2;
        const armGeo = new THREE.BoxGeometry(0.1, 0.7, 0.1);
        const rArm = new THREE.Mesh(armGeo, matHolo); rArm.position.set(-0.4, 1.3, 0);
        const lArm = new THREE.Mesh(armGeo, matHolo); lArm.position.set(0.4, 1.3, 0);
        const legGeo = new THREE.BoxGeometry(0.15, 0.9, 0.15);
        const rLeg = new THREE.Mesh(legGeo, matHolo); rLeg.position.set(-0.2, 0.5, 0);
        const lLeg = new THREE.Mesh(legGeo, matHolo); lLeg.position.set(0.2, 0.5, 0);
        const gun = new THREE.Mesh(new THREE.BoxGeometry(0.1, 0.2, 0.5), matAlert); gun.position.set(-0.4, 0.9, 0.4); gun.visible = false;

        botGroup.add(head, torso, rArm, lArm, rLeg, lLeg, gun);

        // CONTAINMENT CAGE (The Trap)
        const cageGeo = new THREE.CylinderGeometry(1.5, 1.5, 4, 16, 4, true);
        const cageMat = new THREE.MeshBasicMaterial({ color: 0x00ffaa, wireframe: true, transparent: true, opacity: 0 });
        const cage = new THREE.Mesh(cageGeo, cageMat);
        cage.position.set(0, 1, 0);
        scene.add(cage);

        // Grid & Lights
        const grid = new THREE.GridHelper(50, 50, 0x222222, 0x050505); scene.add(grid);
        const spot = new THREE.SpotLight(0xffffff, 0, 50, 0.5, 0.5); spot.position.set(0, 10, 0); spot.target = botGroup; scene.add(spot);
        const strobeRed = new THREE.PointLight(0xff0000, 0, 20); strobeRed.position.set(5, 5, 5); scene.add(strobeRed);
        const strobeBlue = new THREE.PointLight(0x0000ff, 0, 20); strobeBlue.position.set(-5, 5, 5); scene.add(strobeBlue);

        // LOGIC
        const uiConf = document.getElementById('prob-val');
        const uiStatus = document.getElementById('status-text');
        const hud = document.getElementById('hud-main');
        const tags = {
            head: document.getElementById('tag-head'),
            spine: document.getElementById('tag-spine'),
            weapon: document.getElementById('tag-weapon')
        };

        const steps = document.querySelectorAll('.scroll-step');
        steps.forEach((step, i) => {
            ScrollTrigger.create({
                trigger: step, start: "top center", end: "bottom center",
                onEnter: () => setPhase(i), onEnterBack: () => setPhase(i),
                onLeave: () => step.classList.remove('active'),
                onLeaveBack: () => step.classList.remove('active')
            });
        });

        function setPhase(i) {
            steps.forEach(s => s.classList.remove('active'));
            steps[i].classList.add('active');

            // Reset
            gun.visible = false;
            cageMat.opacity = 0;
            strobeRed.intensity = 0; strobeBlue.intensity = 0;
            matHolo.color.setHex(0x00ffaa);
            hud.classList.remove('danger-mode', 'success-mode');
            rgb.uniforms['amount'].value = 0.0015;
            Object.values(tags).forEach(t => { t.style.opacity = 0; t.classList.remove('danger'); });

            if(i === 0) { // SCAN
                uiStatus.innerText = "SYSTEM: MAPPING"; uiConf.innerText = "0%"; uiConf.style.color = "white";
                gsap.to(camera.position, { z: 8, y: 2, x: 0, duration: 1 });
            } else if(i === 1) { // ID
                uiStatus.innerText = "SYSTEM: CLASSIFYING"; uiConf.innerText = "88%"; uiConf.style.color = "#00ffaa";
                tags.head.style.opacity = 1;
                gsap.to(camera.position, { z: 5, y: 1.5, x: 0, duration: 1 });
            } else if(i === 2) { // SKELETON
                uiStatus.innerText = "SYSTEM: ANALYZING"; uiConf.innerText = "94%";
                tags.spine.style.opacity = 1;
            } else if(i === 3) { // THREAT
                uiStatus.innerText = "THREAT DETECTED"; uiStatus.style.color = "red";
                uiConf.innerText = "99%"; uiConf.style.color = "red";
                gun.visible = true;
                matHolo.color.setHex(0xff3333);
                hud.classList.add('danger-mode');
                tags.weapon.style.opacity = 1; tags.weapon.classList.add('danger');
                gsap.to(camera.position, { x: -1, y: 1.2, z: 4, duration: 0.5 });
            } else if(i === 4) { // NEUTRALIZE
                uiStatus.innerText = "TARGET SECURED"; uiStatus.style.color = "#00ffaa";
                uiConf.innerText = "100%"; uiConf.style.color = "#00ffaa";
                hud.classList.add('success-mode');
                matHolo.color.setHex(0x00ffaa);
                gun.visible = false;
                
                // Takdedown Animation
                gsap.to(botGroup.rotation, { x: -1.5, duration: 0.8, ease: "bounce.out" });
                gsap.to(botGroup.position, { y: 0.2, duration: 0.8 });
                
                // Trap
                cageMat.opacity = 0.8;
                
                // Camera Overhead
                gsap.to(camera.position, { x: 0, y: 6, z: 1, duration: 1.5 });
                camera.lookAt(0, 0, 0);
                
                // Strobes
                spot.intensity = 2;
            }
        }

        // LOOP
        const clock = new THREE.Clock();
        function animate() {
            requestAnimationFrame(animate);
            const t = clock.getElapsedTime();

            if(steps[4].classList.contains('active')) {
                // Strobe Lights Logic
                if(Math.floor(t * 10) % 2 === 0) {
                    strobeRed.intensity = 5; strobeBlue.intensity = 0;
                } else {
                    strobeRed.intensity = 0; strobeBlue.intensity = 5;
                }
                // Rotate Cage
                cage.rotation.y += 0.05;
            } else {
                // Normal Walk
                if(steps[2].classList.contains('active') || steps[3].classList.contains('active')) {
                    rArm.rotation.x = Math.cos(t*5)*0.6; lArm.rotation.x = -Math.cos(t*5)*0.6;
                    rLeg.rotation.x = -Math.cos(t*5)*0.6; lLeg.rotation.x = Math.cos(t*5)*0.6;
                    botGroup.position.y = Math.abs(Math.sin(t*10))*0.05;
                } else {
                    rArm.rotation.x=0; lArm.rotation.x=0; rLeg.rotation.x=0; lLeg.rotation.x=0;
                    botGroup.rotation.x = 0; botGroup.position.y = 0;
                }
                camera.lookAt(0, 1.2, 0);
            }

            updateTag(tags.head, head, 0.2);
            updateTag(tags.spine, torso, 0);
            updateTag(tags.weapon, gun, 0);
            composer.render();
        }


        function updateTag(el, obj, yOffset) {
            if(el.style.opacity == 0) return;
            const vec = new THREE.Vector3();
            obj.getWorldPosition(vec); vec.y += yOffset; vec.project(camera);
            const x = (vec.x*.5+.5)*container.offsetWidth;
            const y = (-(vec.y*.5)+.5)*container.offsetHeight;
            el.style.left = `${x}px`; el.style.top = `${y}px`;
        }

        window.addEventListener('resize', () => {
            camera.aspect = container.offsetWidth/container.offsetHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(container.offsetWidth, container.offsetHeight);
            composer.setSize(container.offsetWidth, container.offsetHeight);
        });
        animate();
    </script>
</body>
</html>